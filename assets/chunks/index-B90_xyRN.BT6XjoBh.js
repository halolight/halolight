import{d as x,p as w,c as C,q as I,v as B,X as M,o as E,Y as L,b as O,e as N,Z as S,j as p,w as A,r as D,T as K}from"./framework.BuRUkFgc.js";import{Z as V,f as Z,a as F,v as H,F as P,p as U}from"./theme.UrnYZ8Qw.js";var R=(d,n,o)=>new Promise((a,s)=>{var v=e=>{try{l(o.next(e))}catch(f){s(f)}},c=e=>{try{l(o.throw(e))}catch(f){s(f)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(v,c);l((o=o.apply(d,n)).next())});const W={class:"math-inline__loading",role:"status","aria-live":"polite"},X=x({__name:"MathInlineNode",props:{node:{}},setup(d){const n=d,o=w(null),a=w(null);let s=!1,v=0,c=!1,l=null;const e=w(!0),f=Z();let r=null;function T(){return R(this,null,function*(){if(!n.node.content||!a.value||c)return;l&&(l.abort(),l=null);const i=++v,u=new AbortController;if(l=u,!s)try{!r&&o.value&&(r=f(o.value)),yield r==null?void 0:r.whenVisible}catch{}F(n.node.content,!1,{timeout:1500,waitTimeout:0,maxRetries:0,signal:u.signal}).then(t=>{c||i!==v||a.value&&(a.value.innerHTML=t,e.value=!1,s=!0)}).catch(t=>R(null,null,function*(){if(c||i!==v||!a.value)return;const m=(t==null?void 0:t.code)||(t==null?void 0:t.name),b=m==="WORKER_INIT_ERROR"||(t==null?void 0:t.fallbackToRenderer),k=m===U||m==="WORKER_TIMEOUT",h=m==="KATEX_DISABLED";if(b||k){const g=yield H();if(g){try{const _=g.renderToString(n.node.content,{throwOnError:n.node.loading,displayMode:!1});e.value=!1,a.value.innerHTML=_,s=!0,P(n.node.content,!1,_)}catch{}return}}if(h){e.value=!1,a.value.textContent=n.node.raw;return}s||(e.value=!h),n.node.loading?h&&(a.value.textContent=n.node.raw):(e.value=!1,a.value.textContent=n.node.raw)}))})}return I(()=>n.node.content,()=>{T()}),B(()=>{T()}),M(()=>{var i;c=!0,l&&(l.abort(),l=null),(i=r==null?void 0:r.destroy)==null||i.call(r),r=null}),(i,u)=>(E(),C("span",{ref_key:"containerEl",ref:o,class:"math-inline-wrapper"},[L(p("span",{ref_key:"mathElement",ref:a,class:"math-inline"},null,512),[[S,!e.value]]),e.value?(E(),O(K,{key:0,name:"table-node-fade"},{default:A(()=>[p("span",W,[D(i.$slots,"loading",{isLoading:e.value},()=>[u[0]||(u[0]=p("span",{class:"math-inline__spinner animate-spin","aria-hidden":"true"},null,-1)),u[1]||(u[1]=p("span",{class:"sr-only"},"Loading",-1))],!0)])]),_:3})):N("",!0)],512))}}),y=V(X,[["__scopeId","data-v-fbd3ae11"]]);y.install=d=>{d.component(y.__name,y)};export{y as default};
