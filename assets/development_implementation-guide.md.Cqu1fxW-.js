import{_ as a,c as i,o as n,a3 as e}from"./chunks/framework.BuRUkFgc.js";const E=JSON.parse('{"title":"实现指南","description":"","frontmatter":{},"headers":[],"relativePath":"development/implementation-guide.md","filePath":"development/implementation-guide.md","lastUpdated":1764404835000}'),l={name:"development/implementation-guide.md"};function t(p,s,h,r,k,d){return n(),i("div",{"data-pagefind-body":!0,"data-pagefind-meta":"date:1764404835000"},[...s[0]||(s[0]=[e(`<h1 id="实现指南" tabindex="-1">实现指南 <a class="header-anchor" href="#实现指南" aria-label="Permalink to &quot;实现指南&quot;">​</a></h1><p>本指南帮助开发者为 HaloLight 创建新的框架版本实现。</p><h2 id="共用约束" tabindex="-1">共用约束 <a class="header-anchor" href="#共用约束" aria-label="Permalink to &quot;共用约束&quot;">​</a></h2><ul><li><strong>数据模拟</strong>：使用 Mock.js 结合 <code>fetch</code> 拦截，行为与 <code>halolight/src/mock</code> 对齐 (响应格式、延时、错误码)</li><li><strong>认证流程</strong>：登录/注册/忘记密码/重置密码参考 <code>halolight/src/app/(auth)</code> 的页面流与校验逻辑</li><li><strong>环境变量</strong>：各框架复用同一变量命名 (如 <code>*_API_URL</code>、<code>*_USE_MOCK</code>、<code>*_DEMO_*</code>、<code>*_BRAND_NAME</code>)，保持文档一致</li><li><strong>CI/CD 与测试</strong>：沿用通用工作流 (lint + type-check + test + build + security)，保留单元测试与覆盖率任务</li></ul><h2 id="实现清单" tabindex="-1">实现清单 <a class="header-anchor" href="#实现清单" aria-label="Permalink to &quot;实现清单&quot;">​</a></h2><h3 id="第一阶段-项目初始化" tabindex="-1">第一阶段：项目初始化 <a class="header-anchor" href="#第一阶段-项目初始化" aria-label="Permalink to &quot;第一阶段：项目初始化&quot;">​</a></h3><ul><li>[ ] 使用框架 CLI 创建项目</li><li>[ ] 配置 TypeScript</li><li>[ ] 安装 Tailwind CSS</li><li>[ ] 安装 shadcn/ui 对应版本</li><li>[ ] 配置环境变量</li><li>[ ] 设置路径别名 (<code>@/</code>)</li></ul><h3 id="第二阶段-基础架构" tabindex="-1">第二阶段：基础架构 <a class="header-anchor" href="#第二阶段-基础架构" aria-label="Permalink to &quot;第二阶段：基础架构&quot;">​</a></h3><ul><li>[ ] 创建目录结构</li><li>[ ] 实现 API 服务层</li><li>[ ] 配置 TanStack Query</li><li>[ ] 设置 Mock.js fetch 拦截 (复用 <code>halolight/src/mock</code> 数据结构)</li><li>[ ] 实现状态管理 Store</li></ul><h3 id="第三阶段-认证系统" tabindex="-1">第三阶段：认证系统 <a class="header-anchor" href="#第三阶段-认证系统" aria-label="Permalink to &quot;第三阶段：认证系统&quot;">​</a></h3><ul><li>[ ] 登录/注册/忘记密码/重置密码页面 (参考 Next.js 版本交互)</li><li>[ ] Auth Store (含 Token 持久化)</li><li>[ ] 路由守卫</li><li>[ ] 权限检查 (页面级与按钮级)</li></ul><h3 id="第四阶段-布局组件" tabindex="-1">第四阶段：布局组件 <a class="header-anchor" href="#第四阶段-布局组件" aria-label="Permalink to &quot;第四阶段：布局组件&quot;">​</a></h3><ul><li>[ ] AdminLayout</li><li>[ ] AuthLayout</li><li>[ ] Sidebar</li><li>[ ] Header</li><li>[ ] Footer</li><li>[ ] Breadcrumb</li><li>[ ] TabsNav</li></ul><h3 id="第五阶段-核心页面" tabindex="-1">第五阶段：核心页面 <a class="header-anchor" href="#第五阶段-核心页面" aria-label="Permalink to &quot;第五阶段：核心页面&quot;">​</a></h3><ul><li>[ ] Dashboard (可拖拽仪表盘)</li><li>[ ] 用户管理 (CRUD)</li><li>[ ] 角色管理</li><li>[ ] 权限管理</li><li>[ ] 系统设置</li><li>[ ] 个人中心</li></ul><h3 id="第六阶段-增强功能" tabindex="-1">第六阶段：增强功能 <a class="header-anchor" href="#第六阶段-增强功能" aria-label="Permalink to &quot;第六阶段：增强功能&quot;">​</a></h3><ul><li>[ ] 主题切换</li><li>[ ] 皮肤预设</li><li>[ ] 多语言 (可选)</li><li>[ ] 响应式适配</li><li>[ ] 错误边界</li><li>[ ] CI/CD (lint、type-check、test、build、security) 与覆盖率报告</li></ul><h2 id="快速开始" tabindex="-1">快速开始 <a class="header-anchor" href="#快速开始" aria-label="Permalink to &quot;快速开始&quot;">​</a></h2><h3 id="_1。创建项目" tabindex="-1">1。创建项目 <a class="header-anchor" href="#_1。创建项目" aria-label="Permalink to &quot;1。创建项目&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Next.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create-next-app@latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> halolight</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --typescript</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tailwind</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --app</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Vue</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vue@latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> halolight-vue</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># SvelteKit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> halolight-svelte</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Angular</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ng</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> halolight-angular</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --routing</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --style=scss</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_2。安装依赖" tabindex="-1">2。安装依赖 <a class="header-anchor" href="#_2。安装依赖" aria-label="Permalink to &quot;2。安装依赖&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 通用依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> axios</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @tanstack/react-query</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zustand</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tailwindcss</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postcss</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> autoprefixer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># shadcn/ui</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shadcn@latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3。目录结构" tabindex="-1">3。目录结构 <a class="header-anchor" href="#_3。目录结构" aria-label="Permalink to &quot;3。目录结构&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/</span></span>
<span class="line"><span>├── app/              # 页面</span></span>
<span class="line"><span>├── components/</span></span>
<span class="line"><span>│   ├── ui/          # shadcn 组件</span></span>
<span class="line"><span>│   ├── layout/      # 布局组件</span></span>
<span class="line"><span>│   └── dashboard/   # 仪表盘组件</span></span>
<span class="line"><span>├── hooks/           # 自定义 hooks</span></span>
<span class="line"><span>├── stores/          # 状态管理</span></span>
<span class="line"><span>├── services/        # API 服务</span></span>
<span class="line"><span>├── lib/             # 工具函数</span></span>
<span class="line"><span>├── types/           # 类型定义</span></span>
<span class="line"><span>└── mocks/           # Mock 数据</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="框架对照表" tabindex="-1">框架对照表 <a class="header-anchor" href="#框架对照表" aria-label="Permalink to &quot;框架对照表&quot;">​</a></h2><h3 id="组件语法" tabindex="-1">组件语法 <a class="header-anchor" href="#组件语法" aria-label="Permalink to &quot;组件语法&quot;">​</a></h3><table tabindex="0"><thead><tr><th>概念</th><th>React</th><th>Vue</th><th>Svelte</th></tr></thead><tbody><tr><td>组件</td><td><code>function Component()</code></td><td><code>&lt;script setup&gt;</code></td><td><code>&lt;script&gt;</code></td></tr><tr><td>Props</td><td><code>props: Props</code></td><td><code>defineProps&lt;Props&gt;()</code></td><td><code>export let prop</code></td></tr><tr><td>State</td><td><code>useState()</code></td><td><code>ref()</code></td><td><code>let state = $state()</code></td></tr><tr><td>计算</td><td><code>useMemo()</code></td><td><code>computed()</code></td><td><code>$derived()</code></td></tr><tr><td>副作用</td><td><code>useEffect()</code></td><td><code>watch()</code></td><td><code>$effect()</code></td></tr><tr><td>上下文</td><td><code>useContext()</code></td><td><code>provide/inject</code></td><td><code>setContext()</code></td></tr></tbody></table><h3 id="路由" tabindex="-1">路由 <a class="header-anchor" href="#路由" aria-label="Permalink to &quot;路由&quot;">​</a></h3><table tabindex="0"><thead><tr><th>概念</th><th>Next.js</th><th>Vue Router</th><th>SvelteKit</th></tr></thead><tbody><tr><td>文件路由</td><td><code>app/page.tsx</code></td><td>-</td><td><code>routes/+page.svelte</code></td></tr><tr><td>动态路由</td><td><code>[id]/page.tsx</code></td><td><code>:id</code></td><td><code>[id]/+page.svelte</code></td></tr><tr><td>布局</td><td><code>layout.tsx</code></td><td>-</td><td><code>+layout.svelte</code></td></tr><tr><td>守卫</td><td><code>middleware.ts</code></td><td><code>beforeEach</code></td><td><code>+page.server.ts</code></td></tr></tbody></table><h3 id="状态管理" tabindex="-1">状态管理 <a class="header-anchor" href="#状态管理" aria-label="Permalink to &quot;状态管理&quot;">​</a></h3><table tabindex="0"><thead><tr><th>框架</th><th>推荐方案</th><th>持久化</th></tr></thead><tbody><tr><td>React</td><td>Zustand</td><td>zustand/middleware</td></tr><tr><td>Vue</td><td>Pinia</td><td>pinia-plugin-persistedstate</td></tr><tr><td>Svelte</td><td>Svelte Stores</td><td>-</td></tr><tr><td>Angular</td><td>Signals</td><td>localStorage</td></tr></tbody></table><h2 id="api-模块模板" tabindex="-1">API 模块模板 <a class="header-anchor" href="#api-模块模板" aria-label="Permalink to &quot;API 模块模板&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// services/users.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { api } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./api&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> userService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  getList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { params }),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  getById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`/users/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`/users/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`/users/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="query-hook-模板" tabindex="-1">Query Hook 模板 <a class="header-anchor" href="#query-hook-模板" aria-label="Permalink to &quot;Query Hook 模板&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// hooks/useUsers.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useUsers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, params],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    queryFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(params),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useCreateUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> queryClient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useQueryClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useMutation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mutationFn: userService.create,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      queryClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invalidateQueries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="store-模板" tabindex="-1">Store 模板 <a class="header-anchor" href="#store-模板" aria-label="Permalink to &quot;Store 模板&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// stores/auth.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> useAuthStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  persist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      user: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      token: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      isAuthenticated: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">credentials</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(credentials)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          user: response.user,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          token: response.token,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          isAuthenticated: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      logout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ user: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, token: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAuthenticated: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      hasPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">permission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> permissions?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(permission) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> permissions?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="测试清单" tabindex="-1">测试清单 <a class="header-anchor" href="#测试清单" aria-label="Permalink to &quot;测试清单&quot;">​</a></h2><h3 id="功能测试" tabindex="-1">功能测试 <a class="header-anchor" href="#功能测试" aria-label="Permalink to &quot;功能测试&quot;">​</a></h3><ul><li>[ ] 登录/登出流程</li><li>[ ] 权限控制生效</li><li>[ ] 仪表盘拖拽保存</li><li>[ ] 主题切换正常</li><li>[ ] 皮肤切换正常</li><li>[ ] 响应式布局</li><li>[ ] 数据表格操作</li><li>[ ] 表单提交验证</li></ul><h3 id="兼容性测试" tabindex="-1">兼容性测试 <a class="header-anchor" href="#兼容性测试" aria-label="Permalink to &quot;兼容性测试&quot;">​</a></h3><ul><li>[ ] Chrome 最新版</li><li>[ ] Firefox 最新版</li><li>[ ] Safari 最新版</li><li>[ ] Edge 最新版</li><li>[ ] 移动端浏览器</li></ul><h2 id="代码规范" tabindex="-1">代码规范 <a class="header-anchor" href="#代码规范" aria-label="Permalink to &quot;代码规范&quot;">​</a></h2><h3 id="命名约定" tabindex="-1">命名约定 <a class="header-anchor" href="#命名约定" aria-label="Permalink to &quot;命名约定&quot;">​</a></h3><table tabindex="0"><thead><tr><th>类型</th><th>规范</th><th>示例</th></tr></thead><tbody><tr><td>组件</td><td>PascalCase</td><td><code>UserCard.tsx</code></td></tr><tr><td>Hook</td><td>camelCase + use</td><td><code>useUsers.ts</code></td></tr><tr><td>Store</td><td>camelCase + use</td><td><code>useAuthStore.ts</code></td></tr><tr><td>服务</td><td>camelCase + Service</td><td><code>userService.ts</code></td></tr><tr><td>类型</td><td>PascalCase</td><td><code>User</code>, <code>UserQueryParams</code></td></tr><tr><td>常量</td><td>UPPER_SNAKE</td><td><code>API_BASE_URL</code></td></tr></tbody></table><h3 id="文件组织" tabindex="-1">文件组织 <a class="header-anchor" href="#文件组织" aria-label="Permalink to &quot;文件组织&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 组件目录</span></span>
<span class="line"><span>components/</span></span>
<span class="line"><span>└── UserCard/</span></span>
<span class="line"><span>    ├── index.tsx          # 主组件</span></span>
<span class="line"><span>    ├── UserCard.types.ts  # 类型定义</span></span>
<span class="line"><span>    └── useUserCard.ts     # 组件逻辑</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 页面目录</span></span>
<span class="line"><span>app/users/</span></span>
<span class="line"><span>├── page.tsx               # 列表页</span></span>
<span class="line"><span>├── [id]/</span></span>
<span class="line"><span>│   └── page.tsx          # 详情页</span></span>
<span class="line"><span>└── create/</span></span>
<span class="line"><span>    └── page.tsx          # 创建页</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="参考资源" tabindex="-1">参考资源 <a class="header-anchor" href="#参考资源" aria-label="Permalink to &quot;参考资源&quot;">​</a></h2><ul><li><a href="https://github.com/halolight/halolight" target="_blank" rel="noreferrer">Next.js 实现</a></li><li><a href="https://github.com/halolight/halolight-vue" target="_blank" rel="noreferrer">Vue 实现</a></li><li><a href="https://ui.shadcn.com" target="_blank" rel="noreferrer">shadcn/ui</a></li><li><a href="https://tanstack.com/query" target="_blank" rel="noreferrer">TanStack Query</a></li></ul>`,49)])])}const o=a(l,[["render",t]]);export{E as __pageData,o as default};
