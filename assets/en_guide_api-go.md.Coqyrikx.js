import{_ as a,c as i,o as n,a3 as e}from"./chunks/framework.BuRUkFgc.js";const c=JSON.parse('{"title":"Go Fiber Backend API","description":"","frontmatter":{},"headers":[],"relativePath":"en/guide/api-go.md","filePath":"en/guide/api-go.md","lastUpdated":1765973614000}'),t={name:"en/guide/api-go.md"};function l(p,s,r,d,h,k){return n(),i("div",{"data-pagefind-body":!0,"data-pagefind-meta":"date:1765973614000"},[...s[0]||(s[0]=[e(`<h1 id="go-fiber-backend-api" tabindex="-1">Go Fiber Backend API <a class="header-anchor" href="#go-fiber-backend-api" aria-label="Permalink to &quot;Go Fiber Backend API&quot;">â€‹</a></h1><p>HaloLight Go Fiber backend API is built on Fiber 3.0, providing high-performance Go backend service with complete JWT dual-token authentication.</p><p><strong>API Documentation</strong>: <a href="https://halolight-api-go.h7ml.cn/docs" target="_blank" rel="noreferrer">https://halolight-api-go.h7ml.cn/docs</a></p><p><strong>GitHub</strong>: <a href="https://github.com/halolight/halolight-api-go" target="_blank" rel="noreferrer">https://github.com/halolight/halolight-api-go</a></p><h2 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-label="Permalink to &quot;Features&quot;">â€‹</a></h2><ul><li>ğŸ” <strong>JWT Dual Tokens</strong> - Access Token + Refresh Token with auto-renewal</li><li>ğŸ›¡ï¸ <strong>RBAC Permissions</strong> - Role-based access control with wildcard matching</li><li>ğŸ“¡ <strong>RESTful API</strong> - Standardized interface design with OpenAPI documentation</li><li>ğŸ—„ï¸ <strong>GORM 2</strong> - Type-safe database operations</li><li>âœ… <strong>Data Validation</strong> - Request parameter validation and error handling</li><li>ğŸ“Š <strong>Logging System</strong> - Request logging and error tracking</li><li>ğŸ³ <strong>Docker Support</strong> - Containerized deployment</li></ul><h2 id="tech-stack" tabindex="-1">Tech Stack <a class="header-anchor" href="#tech-stack" aria-label="Permalink to &quot;Tech Stack&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>Technology</th><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>Go</td><td>1.22+</td><td>Runtime</td></tr><tr><td>Fiber</td><td>3.0</td><td>Web Framework</td></tr><tr><td>GORM</td><td>2.0</td><td>Database ORM</td></tr><tr><td>PostgreSQL</td><td>16</td><td>Data Storage</td></tr><tr><td>go-playground/validator</td><td>v10</td><td>Data Validation</td></tr><tr><td>JWT</td><td>golang-jwt/jwt/v5</td><td>Authentication</td></tr><tr><td>Swagger UI</td><td>-</td><td>API Documentation</td></tr></tbody></table><h2 id="quick-start" tabindex="-1">Quick Start <a class="header-anchor" href="#quick-start" aria-label="Permalink to &quot;Quick Start&quot;">â€‹</a></h2><h3 id="environment-requirements" tabindex="-1">Environment Requirements <a class="header-anchor" href="#environment-requirements" aria-label="Permalink to &quot;Environment Requirements&quot;">â€‹</a></h3><ul><li>Go &gt;= 1.22</li><li>PostgreSQL 16 (optional, defaults to SQLite)</li></ul><h3 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Clone repository</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/halolight/halolight-api-go.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> halolight-api-go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Install dependencies</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> download</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="environment-variables" tabindex="-1">Environment Variables <a class="header-anchor" href="#environment-variables" aria-label="Permalink to &quot;Environment Variables&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.example</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-env vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Database</span></span>
<span class="line"><span>DATABASE_URL=postgresql://user:pass@localhost:5432/halolight?sslmode=disable</span></span>
<span class="line"><span></span></span>
<span class="line"><span># JWT Secret</span></span>
<span class="line"><span>JWT_SECRET=your-super-secret-key</span></span>
<span class="line"><span>JWT_ACCESS_EXPIRES=7d</span></span>
<span class="line"><span>JWT_REFRESH_EXPIRES=30d</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Service Configuration</span></span>
<span class="line"><span>PORT=8080</span></span>
<span class="line"><span>APP_ENV=development</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="database-initialization" tabindex="-1">Database Initialization <a class="header-anchor" href="#database-initialization" aria-label="Permalink to &quot;Database Initialization&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># GORM auto-migration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cmd/server/main.go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Or use Makefile</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="start-service" tabindex="-1">Start Service <a class="header-anchor" href="#start-service" aria-label="Permalink to &quot;Start Service&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Development mode</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cmd/server/main.go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Production mode</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/server</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Visit <a href="http://localhost:8080" target="_blank" rel="noreferrer">http://localhost:8080</a></p><h2 id="project-structure" tabindex="-1">Project Structure <a class="header-anchor" href="#project-structure" aria-label="Permalink to &quot;Project Structure&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>halolight-api-go/</span></span>
<span class="line"><span>â”œâ”€â”€ cmd/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ server/</span></span>
<span class="line"><span>â”‚       â””â”€â”€ main.go              # Application entry</span></span>
<span class="line"><span>â”œâ”€â”€ internal/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ handlers/                # Controllers/route handlers</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ auth_handler.go      # Authentication endpoints</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ user_handler.go      # User management</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ role_handler.go      # Role management</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ permission_handler.go # Permission management</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ team_handler.go      # Team management</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ document_handler.go  # Document management</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ file_handler.go      # File management</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ folder_handler.go    # Folder management</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ calendar_handler.go  # Calendar events</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ notification_handler.go # Notification management</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ message_handler.go   # Message management</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ dashboard_handler.go # Dashboard statistics</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ home_handler.go      # Homepage + health check</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ services/                # Business logic layer</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ auth_service.go</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ user_service.go</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ ...</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ models/                  # Data models</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ user.go</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ role.go</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ ...</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ middleware/              # Middleware</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ auth.go</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ cors.go</span></span>
<span class="line"><span>â”‚   â””â”€â”€ routes/                  # Route configuration</span></span>
<span class="line"><span>â”‚       â””â”€â”€ router.go</span></span>
<span class="line"><span>â”œâ”€â”€ pkg/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ config/                  # Configuration management</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ database/                # Database connection</span></span>
<span class="line"><span>â”‚   â””â”€â”€ utils/                   # Utility functions</span></span>
<span class="line"><span>â”œâ”€â”€ docs/                        # Documentation</span></span>
<span class="line"><span>â”œâ”€â”€ .github/workflows/           # GitHub Actions</span></span>
<span class="line"><span>â”œâ”€â”€ Dockerfile                   # Docker configuration</span></span>
<span class="line"><span>â”œâ”€â”€ docker-compose.yml</span></span>
<span class="line"><span>â””â”€â”€ go.mod</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h2 id="api-modules" tabindex="-1">API Modules <a class="header-anchor" href="#api-modules" aria-label="Permalink to &quot;API Modules&quot;">â€‹</a></h2><h3 id="authentication-endpoints" tabindex="-1">Authentication Endpoints <a class="header-anchor" href="#authentication-endpoints" aria-label="Permalink to &quot;Authentication Endpoints&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th><th>Permission</th></tr></thead><tbody><tr><td>POST</td><td><code>/api/auth/login</code></td><td>User login</td><td>Public</td></tr><tr><td>POST</td><td><code>/api/auth/register</code></td><td>User registration</td><td>Public</td></tr><tr><td>POST</td><td><code>/api/auth/refresh</code></td><td>Refresh token</td><td>Public</td></tr><tr><td>POST</td><td><code>/api/auth/logout</code></td><td>Logout</td><td>Authenticated</td></tr><tr><td>POST</td><td><code>/api/auth/forgot-password</code></td><td>Forgot password</td><td>Public</td></tr><tr><td>POST</td><td><code>/api/auth/reset-password</code></td><td>Reset password</td><td>Public</td></tr><tr><td>GET</td><td><code>/api/auth/me</code></td><td>Get current user</td><td>Authenticated</td></tr></tbody></table><h3 id="user-management-endpoints" tabindex="-1">User Management Endpoints <a class="header-anchor" href="#user-management-endpoints" aria-label="Permalink to &quot;User Management Endpoints&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th><th>Permission</th></tr></thead><tbody><tr><td>GET</td><td><code>/api/users</code></td><td>List users</td><td><code>users:view</code></td></tr><tr><td>GET</td><td><code>/api/users/:id</code></td><td>Get user details</td><td><code>users:view</code></td></tr><tr><td>POST</td><td><code>/api/users</code></td><td>Create user</td><td><code>users:create</code></td></tr><tr><td>PUT</td><td><code>/api/users/:id</code></td><td>Update user</td><td><code>users:update</code></td></tr><tr><td>DELETE</td><td><code>/api/users/:id</code></td><td>Delete user</td><td><code>users:delete</code></td></tr><tr><td>PATCH</td><td><code>/api/users/:id/status</code></td><td>Update user status</td><td><code>users:update</code></td></tr><tr><td>POST</td><td><code>/api/users/batch-delete</code></td><td>Batch delete users</td><td><code>users:delete</code></td></tr></tbody></table><h3 id="complete-endpoint-list" tabindex="-1">Complete Endpoint List <a class="header-anchor" href="#complete-endpoint-list" aria-label="Permalink to &quot;Complete Endpoint List&quot;">â€‹</a></h3><h4 id="role-management-roles-6-endpoints" tabindex="-1">Role Management (Roles) - 6 endpoints <a class="header-anchor" href="#role-management-roles-6-endpoints" aria-label="Permalink to &quot;Role Management (Roles) - 6 endpoints&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td>GET</td><td><code>/api/roles</code></td><td>List roles</td></tr><tr><td>GET</td><td><code>/api/roles/:id</code></td><td>Get role details</td></tr><tr><td>POST</td><td><code>/api/roles</code></td><td>Create role</td></tr><tr><td>PUT</td><td><code>/api/roles/:id</code></td><td>Update role</td></tr><tr><td>POST</td><td><code>/api/roles/:id/permissions</code></td><td>Assign permissions</td></tr><tr><td>DELETE</td><td><code>/api/roles/:id</code></td><td>Delete role</td></tr></tbody></table><h4 id="permission-management-permissions-4-endpoints" tabindex="-1">Permission Management (Permissions) - 4 endpoints <a class="header-anchor" href="#permission-management-permissions-4-endpoints" aria-label="Permalink to &quot;Permission Management (Permissions) - 4 endpoints&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td>GET</td><td><code>/api/permissions</code></td><td>List permissions</td></tr><tr><td>GET</td><td><code>/api/permissions/:id</code></td><td>Get permission details</td></tr><tr><td>POST</td><td><code>/api/permissions</code></td><td>Create permission</td></tr><tr><td>DELETE</td><td><code>/api/permissions/:id</code></td><td>Delete permission</td></tr></tbody></table><h4 id="team-management-teams-7-endpoints" tabindex="-1">Team Management (Teams) - 7 endpoints <a class="header-anchor" href="#team-management-teams-7-endpoints" aria-label="Permalink to &quot;Team Management (Teams) - 7 endpoints&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td>GET</td><td><code>/api/teams</code></td><td>List teams</td></tr><tr><td>GET</td><td><code>/api/teams/:id</code></td><td>Get team details</td></tr><tr><td>POST</td><td><code>/api/teams</code></td><td>Create team</td></tr><tr><td>PATCH</td><td><code>/api/teams/:id</code></td><td>Update team</td></tr><tr><td>DELETE</td><td><code>/api/teams/:id</code></td><td>Delete team</td></tr><tr><td>POST</td><td><code>/api/teams/:id/members</code></td><td>Add member</td></tr><tr><td>DELETE</td><td><code>/api/teams/:id/members/:userId</code></td><td>Remove member</td></tr></tbody></table><h4 id="document-management-documents-11-endpoints" tabindex="-1">Document Management (Documents) - 11 endpoints <a class="header-anchor" href="#document-management-documents-11-endpoints" aria-label="Permalink to &quot;Document Management (Documents) - 11 endpoints&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td>GET</td><td><code>/api/documents</code></td><td>List documents</td></tr><tr><td>GET</td><td><code>/api/documents/:id</code></td><td>Get document details</td></tr><tr><td>POST</td><td><code>/api/documents</code></td><td>Create document</td></tr><tr><td>PUT</td><td><code>/api/documents/:id</code></td><td>Update document</td></tr><tr><td>PATCH</td><td><code>/api/documents/:id/rename</code></td><td>Rename document</td></tr><tr><td>POST</td><td><code>/api/documents/:id/move</code></td><td>Move document</td></tr><tr><td>POST</td><td><code>/api/documents/:id/tags</code></td><td>Update tags</td></tr><tr><td>POST</td><td><code>/api/documents/:id/share</code></td><td>Share document</td></tr><tr><td>POST</td><td><code>/api/documents/:id/unshare</code></td><td>Unshare document</td></tr><tr><td>POST</td><td><code>/api/documents/batch-delete</code></td><td>Batch delete</td></tr><tr><td>DELETE</td><td><code>/api/documents/:id</code></td><td>Delete document</td></tr></tbody></table><h4 id="file-management-files-14-endpoints" tabindex="-1">File Management (Files) - 14 endpoints <a class="header-anchor" href="#file-management-files-14-endpoints" aria-label="Permalink to &quot;File Management (Files) - 14 endpoints&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td>POST</td><td><code>/api/files/upload</code></td><td>Upload file</td></tr><tr><td>POST</td><td><code>/api/files/folder</code></td><td>Create folder</td></tr><tr><td>GET</td><td><code>/api/files</code></td><td>List files</td></tr><tr><td>GET</td><td><code>/api/files/storage</code></td><td>Get storage info</td></tr><tr><td>GET</td><td><code>/api/files/:id</code></td><td>Get file details</td></tr><tr><td>GET</td><td><code>/api/files/:id/download-url</code></td><td>Get download URL</td></tr><tr><td>PATCH</td><td><code>/api/files/:id/rename</code></td><td>Rename file</td></tr><tr><td>POST</td><td><code>/api/files/:id/move</code></td><td>Move file</td></tr><tr><td>POST</td><td><code>/api/files/:id/copy</code></td><td>Copy file</td></tr><tr><td>PATCH</td><td><code>/api/files/:id/favorite</code></td><td>Toggle favorite</td></tr><tr><td>POST</td><td><code>/api/files/:id/share</code></td><td>Share file</td></tr><tr><td>POST</td><td><code>/api/files/batch-delete</code></td><td>Batch delete</td></tr><tr><td>DELETE</td><td><code>/api/files/:id</code></td><td>Delete file</td></tr></tbody></table><h4 id="folder-management-folders-5-endpoints" tabindex="-1">Folder Management (Folders) - 5 endpoints <a class="header-anchor" href="#folder-management-folders-5-endpoints" aria-label="Permalink to &quot;Folder Management (Folders) - 5 endpoints&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td>GET</td><td><code>/api/folders</code></td><td>List folders</td></tr><tr><td>GET</td><td><code>/api/folders/tree</code></td><td>Get folder tree</td></tr><tr><td>GET</td><td><code>/api/folders/:id</code></td><td>Get folder details</td></tr><tr><td>POST</td><td><code>/api/folders</code></td><td>Create folder</td></tr><tr><td>DELETE</td><td><code>/api/folders/:id</code></td><td>Delete folder</td></tr></tbody></table><h4 id="message-management-messages-5-endpoints" tabindex="-1">Message Management (Messages) - 5 endpoints <a class="header-anchor" href="#message-management-messages-5-endpoints" aria-label="Permalink to &quot;Message Management (Messages) - 5 endpoints&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td>GET</td><td><code>/api/messages/conversations</code></td><td>List conversations</td></tr><tr><td>GET</td><td><code>/api/messages/conversations/:id</code></td><td>Get conversation details</td></tr><tr><td>POST</td><td><code>/api/messages</code></td><td>Send message</td></tr><tr><td>PUT</td><td><code>/api/messages/:id/read</code></td><td>Mark as read</td></tr><tr><td>DELETE</td><td><code>/api/messages/:id</code></td><td>Delete message</td></tr></tbody></table><h4 id="notification-management-notifications-5-endpoints" tabindex="-1">Notification Management (Notifications) - 5 endpoints <a class="header-anchor" href="#notification-management-notifications-5-endpoints" aria-label="Permalink to &quot;Notification Management (Notifications) - 5 endpoints&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td>GET</td><td><code>/api/notifications</code></td><td>List notifications</td></tr><tr><td>GET</td><td><code>/api/notifications/unread-count</code></td><td>Get unread count</td></tr><tr><td>PUT</td><td><code>/api/notifications/:id/read</code></td><td>Mark as read</td></tr><tr><td>PUT</td><td><code>/api/notifications/read-all</code></td><td>Mark all as read</td></tr><tr><td>DELETE</td><td><code>/api/notifications/:id</code></td><td>Delete notification</td></tr></tbody></table><h4 id="calendar-management-calendar-9-endpoints" tabindex="-1">Calendar Management (Calendar) - 9 endpoints <a class="header-anchor" href="#calendar-management-calendar-9-endpoints" aria-label="Permalink to &quot;Calendar Management (Calendar) - 9 endpoints&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td>GET</td><td><code>/api/calendar/events</code></td><td>List events</td></tr><tr><td>GET</td><td><code>/api/calendar/events/:id</code></td><td>Get event details</td></tr><tr><td>POST</td><td><code>/api/calendar/events</code></td><td>Create event</td></tr><tr><td>PUT</td><td><code>/api/calendar/events/:id</code></td><td>Update event</td></tr><tr><td>PATCH</td><td><code>/api/calendar/events/:id/reschedule</code></td><td>Reschedule event</td></tr><tr><td>POST</td><td><code>/api/calendar/events/:id/attendees</code></td><td>Add attendee</td></tr><tr><td>DELETE</td><td><code>/api/calendar/events/:id/attendees/:attendeeId</code></td><td>Remove attendee</td></tr><tr><td>POST</td><td><code>/api/calendar/events/batch-delete</code></td><td>Batch delete</td></tr><tr><td>DELETE</td><td><code>/api/calendar/events/:id</code></td><td>Delete event</td></tr></tbody></table><h4 id="dashboard-dashboard-9-endpoints" tabindex="-1">Dashboard (Dashboard) - 9 endpoints <a class="header-anchor" href="#dashboard-dashboard-9-endpoints" aria-label="Permalink to &quot;Dashboard (Dashboard) - 9 endpoints&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td>GET</td><td><code>/api/dashboard/stats</code></td><td>Get statistics</td></tr><tr><td>GET</td><td><code>/api/dashboard/visits</code></td><td>Get visit data</td></tr><tr><td>GET</td><td><code>/api/dashboard/sales</code></td><td>Get sales data</td></tr><tr><td>GET</td><td><code>/api/dashboard/products</code></td><td>Get product data</td></tr><tr><td>GET</td><td><code>/api/dashboard/orders</code></td><td>Get order data</td></tr><tr><td>GET</td><td><code>/api/dashboard/activities</code></td><td>Get activity data</td></tr><tr><td>GET</td><td><code>/api/dashboard/pie</code></td><td>Get pie chart data</td></tr><tr><td>GET</td><td><code>/api/dashboard/tasks</code></td><td>Get task data</td></tr><tr><td>GET</td><td><code>/api/dashboard/overview</code></td><td>Get overview data</td></tr></tbody></table><h2 id="authentication-mechanism" tabindex="-1">Authentication Mechanism <a class="header-anchor" href="#authentication-mechanism" aria-label="Permalink to &quot;Authentication Mechanism&quot;">â€‹</a></h2><h3 id="jwt-dual-tokens" tabindex="-1">JWT Dual Tokens <a class="header-anchor" href="#jwt-dual-tokens" aria-label="Permalink to &quot;JWT Dual Tokens&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Access Token:  7 days validity, used for API requests</span></span>
<span class="line"><span>Refresh Token: 30 days validity, used to refresh Access Token</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="request-headers" tabindex="-1">Request Headers <a class="header-anchor" href="#request-headers" aria-label="Permalink to &quot;Request Headers&quot;">â€‹</a></h3><div class="language-http vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Authorization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Bearer &lt;access_token&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="refresh-flow" tabindex="-1">Refresh Flow <a class="header-anchor" href="#refresh-flow" aria-label="Permalink to &quot;Refresh Flow&quot;">â€‹</a></h3><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Token refresh example</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RefreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fiber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RefreshRequest</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        RefreshToken </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`json:&quot;refreshToken&quot;\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RefreshRequest</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BodyParser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">req); err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fiber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Invalid request&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Validate refresh token</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    claims, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ValidateToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req.RefreshToken)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">401</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fiber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Invalid refresh token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Generate new access token</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    accessToken, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GenerateAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(claims.UserID)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fiber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Failed to generate token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fiber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;accessToken&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: accessToken,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="permission-system" tabindex="-1">Permission System <a class="header-anchor" href="#permission-system" aria-label="Permalink to &quot;Permission System&quot;">â€‹</a></h2><h3 id="role-definitions" tabindex="-1">Role Definitions <a class="header-anchor" href="#role-definitions" aria-label="Permalink to &quot;Role Definitions&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>Role</th><th>Description</th><th>Permissions</th></tr></thead><tbody><tr><td><code>super_admin</code></td><td>Super Administrator</td><td><code>*</code> (all permissions)</td></tr><tr><td><code>admin</code></td><td>Administrator</td><td><code>users:*</code>, <code>documents:*</code>, <code>files:*</code>, <code>teams:*</code></td></tr><tr><td><code>user</code></td><td>Regular User</td><td><code>documents:view</code>, <code>documents:create</code>, <code>files:*</code></td></tr><tr><td><code>guest</code></td><td>Guest</td><td><code>dashboard:view</code></td></tr></tbody></table><h3 id="permission-format" tabindex="-1">Permission Format <a class="header-anchor" href="#permission-format" aria-label="Permalink to &quot;Permission Format&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>{resource}:{action}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Examples:</span></span>
<span class="line"><span>- users:view      # View users</span></span>
<span class="line"><span>- users:create    # Create users</span></span>
<span class="line"><span>- users:*         # All user operations</span></span>
<span class="line"><span>- *               # All permissions</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="error-handling" tabindex="-1">Error Handling <a class="header-anchor" href="#error-handling" aria-label="Permalink to &quot;Error Handling&quot;">â€‹</a></h2><h3 id="error-response-format" tabindex="-1">Error Response Format <a class="header-anchor" href="#error-response-format" aria-label="Permalink to &quot;Error Response Format&quot;">â€‹</a></h3><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;VALIDATION_ERROR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request parameter validation failed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;details&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Invalid email format&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="error-codes" tabindex="-1">Error Codes <a class="header-anchor" href="#error-codes" aria-label="Permalink to &quot;Error Codes&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>Status Code</th><th>Error Code</th><th>Description</th></tr></thead><tbody><tr><td>400</td><td><code>VALIDATION_ERROR</code></td><td>Parameter validation failed</td></tr><tr><td>401</td><td><code>UNAUTHORIZED</code></td><td>Unauthorized</td></tr><tr><td>403</td><td><code>FORBIDDEN</code></td><td>Forbidden</td></tr><tr><td>404</td><td><code>NOT_FOUND</code></td><td>Resource not found</td></tr><tr><td>409</td><td><code>CONFLICT</code></td><td>Resource conflict</td></tr><tr><td>500</td><td><code>INTERNAL_ERROR</code></td><td>Internal server error</td></tr></tbody></table><h2 id="common-commands" tabindex="-1">Common Commands <a class="header-anchor" href="#common-commands" aria-label="Permalink to &quot;Common Commands&quot;">â€‹</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Development</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cmd/server/main.go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cmd/server/main.go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Testing</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Database</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Code Quality</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">golangci-lint</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="deployment" tabindex="-1">Deployment <a class="header-anchor" href="#deployment" aria-label="Permalink to &quot;Deployment&quot;">â€‹</a></h2><h3 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-label="Permalink to &quot;Docker&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> halolight-api-go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8080:8080</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> halolight-api-go</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="docker-compose" tabindex="-1">Docker Compose <a class="header-anchor" href="#docker-compose" aria-label="Permalink to &quot;Docker Compose&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># docker-compose.yml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3.8&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8080:8080&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">APP_ENV=production</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DATABASE_URL=\${DATABASE_URL}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">JWT_SECRET=\${JWT_SECRET}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">postgres:16-alpine</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      POSTGRES_DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">halolight</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      POSTGRES_USER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${DB_USER}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      POSTGRES_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${DB_PASSWORD}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">postgres_data:/var/lib/postgresql/data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  postgres_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="production-configuration" tabindex="-1">Production Configuration <a class="header-anchor" href="#production-configuration" aria-label="Permalink to &quot;Production Configuration&quot;">â€‹</a></h3><div class="language-env vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>APP_ENV=production</span></span>
<span class="line"><span>DATABASE_URL=postgresql://user:pass@host:5432/db</span></span>
<span class="line"><span>JWT_SECRET=your-production-secret</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="testing" tabindex="-1">Testing <a class="header-anchor" href="#testing" aria-label="Permalink to &quot;Testing&quot;">â€‹</a></h2><h3 id="run-tests" tabindex="-1">Run Tests <a class="header-anchor" href="#run-tests" aria-label="Permalink to &quot;Run Tests&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Unit tests</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Test coverage</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -coverprofile=coverage.out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cover</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -html=coverage.out</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="test-example" tabindex="-1">Test Example <a class="header-anchor" href="#test-example" aria-label="Permalink to &quot;Test Example&quot;">â€‹</a></h3><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestUserLogin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">testing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fiber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">New</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Setup routes</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/api/auth/login&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handlers.Login)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Prepare test data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    reqBody </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`{&quot;email&quot;:&quot;test@example.com&quot;,&quot;password&quot;:&quot;password123&quot;}\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    req </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> httptest.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/api/auth/login&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, strings.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(reqBody))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    req.Header.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Execute request</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    resp, _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Verify response</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Equal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(t, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, resp.StatusCode)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="performance-metrics" tabindex="-1">Performance Metrics <a class="header-anchor" href="#performance-metrics" aria-label="Permalink to &quot;Performance Metrics&quot;">â€‹</a></h2><h3 id="benchmarks" tabindex="-1">Benchmarks <a class="header-anchor" href="#benchmarks" aria-label="Permalink to &quot;Benchmarks&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>Metric</th><th>Value</th><th>Conditions</th></tr></thead><tbody><tr><td>Request Throughput</td><td>10,000+ QPS</td><td>Single machine, 8-core CPU</td></tr><tr><td>Average Response Time</td><td>&lt; 10ms</td><td>Simple queries</td></tr><tr><td>Memory Usage</td><td>~50MB</td><td>Idle state</td></tr><tr><td>CPU Usage</td><td>&lt; 10%</td><td>Idle state</td></tr></tbody></table><h2 id="observability" tabindex="-1">Observability <a class="header-anchor" href="#observability" aria-label="Permalink to &quot;Observability&quot;">â€‹</a></h2><h3 id="logging-system" tabindex="-1">Logging System <a class="header-anchor" href="#logging-system" aria-label="Permalink to &quot;Logging System&quot;">â€‹</a></h3><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Logging configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">New</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(os.Stdout, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;API: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, log.LstdFlags)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fiber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> time.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> %s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> %s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> %v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        time.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Since</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(start),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="health-check" tabindex="-1">Health Check <a class="header-anchor" href="#health-check" aria-label="Permalink to &quot;Health Check&quot;">â€‹</a></h3><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Health check endpoint</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/health&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fiber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fiber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;healthy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: time.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;database&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="monitoring-metrics" tabindex="-1">Monitoring Metrics <a class="header-anchor" href="#monitoring-metrics" aria-label="Permalink to &quot;Monitoring Metrics&quot;">â€‹</a></h3><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Prometheus metrics</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/prometheus/client_golang/prometheus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    requestCounter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prometheus.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewCounterVec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        prometheus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CounterOpts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;api_requests_total&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Help: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Total API requests&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;method&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="faq" tabindex="-1">FAQ <a class="header-anchor" href="#faq" aria-label="Permalink to &quot;FAQ&quot;">â€‹</a></h2><h3 id="q-jwt-secret-key-length-requirements" tabindex="-1">Q: JWT secret key length requirements? <a class="header-anchor" href="#q-jwt-secret-key-length-requirements" aria-label="Permalink to &quot;Q: JWT secret key length requirements?&quot;">â€‹</a></h3><p>A: JWT secret must be at least 32 characters. Recommend using 64+ character random strings.</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Generate secure key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rand</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 64</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="q-database-connection-failed" tabindex="-1">Q: Database connection failed? <a class="header-anchor" href="#q-database-connection-failed" aria-label="Permalink to &quot;Q: Database connection failed?&quot;">â€‹</a></h3><p>A: Check database configuration and network connection.</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check PostgreSQL status</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Test connection</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> halolight</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="development-tools" tabindex="-1">Development Tools <a class="header-anchor" href="#development-tools" aria-label="Permalink to &quot;Development Tools&quot;">â€‹</a></h2><h3 id="recommended-plugins-tools" tabindex="-1">Recommended Plugins/Tools <a class="header-anchor" href="#recommended-plugins-tools" aria-label="Permalink to &quot;Recommended Plugins/Tools&quot;">â€‹</a></h3><ul><li><strong>Air</strong> - Go hot reload tool</li><li><strong>golangci-lint</strong> - Go code linter</li><li><strong>goose</strong> - Database migration tool</li><li><strong>mockery</strong> - Mock generation tool</li></ul><h2 id="comparison-with-other-backends" tabindex="-1">Comparison with Other Backends <a class="header-anchor" href="#comparison-with-other-backends" aria-label="Permalink to &quot;Comparison with Other Backends&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>Feature</th><th>Go Fiber</th><th>NestJS</th><th>FastAPI</th><th>Spring Boot</th></tr></thead><tbody><tr><td>Language</td><td>Go</td><td>TypeScript</td><td>Python</td><td>Java</td></tr><tr><td>ORM</td><td>GORM</td><td>Prisma</td><td>SQLAlchemy</td><td>JPA</td></tr><tr><td>Performance</td><td>â­â­â­â­â­</td><td>â­â­â­â­</td><td>â­â­â­â­</td><td>â­â­â­</td></tr><tr><td>Learning Curve</td><td>â­â­â­â­</td><td>â­â­â­</td><td>â­â­â­â­</td><td>â­â­</td></tr></tbody></table><h2 id="related-links" tabindex="-1">Related Links <a class="header-anchor" href="#related-links" aria-label="Permalink to &quot;Related Links&quot;">â€‹</a></h2><ul><li><a href="https://halolight-api-go.h7ml.cn/docs" target="_blank" rel="noreferrer">API Documentation</a></li><li><a href="https://github.com/halolight/halolight-api-go" target="_blank" rel="noreferrer">GitHub Repository</a></li><li><a href="https://docs.gofiber.io" target="_blank" rel="noreferrer">Fiber Official Documentation</a></li><li><a href="https://docs.halolight.h7ml.cn" target="_blank" rel="noreferrer">HaloLight Documentation</a></li></ul>`,105)])])}const E=a(t,[["render",l]]);export{c as __pageData,E as default};
